@model AppModel;

@{
    ViewData["Title"] = "Home Page";
}
<style>
    #webdirect-frame {
        position: fixed;
        top: 0px;
        left: 0px;
        bottom: 0px;
        right: 0px;
        width: 100%;
        height: 100%;
        border: none;
        margin: 0;
        padding: 0;
        overflow: hidden;
        z-index: 999999;
    }
</style>

<iframe id="webdirect-frame" frameborder="0" allowfullscreen src=""></iframe>

@section Scripts {
<script>
    let uri = "@Model.WebDirectFullUri.ToString()";

    history.pushState(null, null, '');
    window.addEventListener("popstate", function () {
        // Prevent Back button click
        history.pushState(null, null, '');
        // setup postMessage push to iframe (to be picked up and pushed into listening webviewer)
        document.getElementById("webdirect-frame").contentWindow.postMessage("@Constants.BackButtonPostEventName", "*");
    });

    iframe = document.getElementById("webdirect-frame");
    iframe.addEventListener("load", function () {
        history.pushState(null, null, '');
    });

    window.addEventListener("load", function () {
        document.getElementById("webdirect-frame").src = uri;
    });

    window.addEventListener("beforeunload", function (e) {
        e.preventDefault();
        return e.returnValue = "Are you sure you want to exit?";
    });
</script>
}